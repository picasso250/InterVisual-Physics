<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简谐运动模拟 | 物理现象互动实验室</title>
    <!-- COMMON STYLES FIRST -->
    <link rel="stylesheet" href="common.css">
    <!-- PAGE-SPECIFIC STYLES -->
    <link rel="stylesheet" href="shm.css">
    <link rel="stylesheet" href="data_display.css">
    <link rel="stylesheet" href="controls.css">

    <!-- ADD KATEX CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">

    <!-- ADD KATEX JS (defer aattributes improves loading performance) -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>
</head>
<body>
    <!-- ADDED BACK LINK -->
    <a href="index.html" class="back-link" aria-label="返回主页">
        <span class="back-icon"></span>
        <span>返回</span>
    </a>

    <canvas id="shmCanvas"></canvas>
    <div id="info">拖拽振子设置初始位置，点击画布开始模拟。</div>

    <!-- Controls panel -->
    <div id="controls" class="ui-panel controls-panel">
        <!-- Content will be dynamically generated by ControlsManager -->
    </div>

    <!-- Data display container -->
    <div id="dataDisplay" class="ui-panel">
        <!-- Content will be dynamically generated by data_display.js -->
    </div>

    <!-- Formula panel -->
    <div id="formulaExplanation" class="ui-panel">
        <h3>简谐运动 (SHM) 微分形式</h3>

        <p><b>1. 恢复力 (胡克定律):</b></p>
        <p>恢复力 <span class="color-f">F</span> 与位移 \(x\) 成正比，方向相反：</p>
        <!-- MathML replaced with LaTeX -->
        $$F = -kx$$
        <p>\(k\) 为弹簧常数，\(x\) 为振子位移。</p>

        <p><b>2. 牛顿第二定律:</b></p>
        <p>合力 <span class="color-f">F</span> = \(ma\)。</p>
        <p>加速度 \(a\) 是 \(x\) 对 \(t\) 的二阶导数：
        <!-- MathML replaced with LaTeX -->
        \(a = \frac{d^2x}{dt^2}\)。</p>

        <p><b>3. 运动微分方程:</b></p>
        <!-- MathML replaced with LaTeX -->
        $$m\frac{d^2x}{dt^2} = -kx$$
        <!-- MathML replaced with LaTeX -->
        $$\frac{d^2x}{dt^2} + \frac{k}{m}x = 0$$
        <p>定义简谐运动。引入角频率 \(\omega\)，其中 \(\omega^2 = k/m\) (或 \(\omega = \sqrt{\frac{k}{m}}\))。</p>
        <!-- MathML replaced with LaTeX -->
        $$\frac{d^2x}{dt^2} + \omega^2x = 0$$
    </div>

    <script type="module" src="shm.js"></script>
    <!-- ADD THIS SCRIPT TO TRIGGER KATEX -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                // ... a list of options if you need them ...
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '\\[', right: '\\]', display: true},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '$', right: '$', display: false}
                ]
            });
        });
    </script>
</body>
</html>